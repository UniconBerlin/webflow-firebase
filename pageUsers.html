<script>
    const loadUsers = async () => {
        const data = await apiCall(`${API_URL}/users`);

        const usersList = document.getElementById('users-list');

        const listItems = document.getElementsByClassName('users-list-item');

        let i = 0;
        for (const user of data.users) {
            let li;
            if(i === 0){
                li = listItems[0]
            } else {
                li = listItems[i-1].cloneNode(true)
            }
            console.log(li);
            const name = li.getElementsByClassName('users-list-item-name')[0];
            name.innerText = user.displayName;

            const email = li.getElementsByClassName('users-list-item-email')[0];
            email.innerText = user.email;

            const editButton = li.getElementsByClassName('users-list-item-button')[0];
            editButton.setAttribute('href', `/admin/user?uid=${user.uid}`);

            usersList.appendChild(li);

            i++;
            
        }
    }
    loadUsers();
</script>